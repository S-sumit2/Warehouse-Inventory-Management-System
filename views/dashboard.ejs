<!doctype html>
<html lang="en">
<head>
  <title>Warehouse Dashboard</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/style.css">

</head>

<body class="d-flex flex-column min-vh-100">

<!-- NAVBAR -->
<nav class="navbar navbar-dark bg-dark px-4">
  <a class="navbar-brand" href="/">Warehouse Inventory</a>

  <div class="ms-auto text-light">
    <% if (user) { %>
      <% if (user.role === "admin") { %>
        <span class="text-warning fw-bold">Admin : <%= user.username %></span>
      <% } else { %>
        <span class="text-info fw-bold">User : <%= user.username %></span>
      <% } %>
      <a href="/logout" class="btn btn-sm btn-danger ms-3">Logout</a>
    <% } else { %>
      <a href="/login" class="btn btn-sm btn-success">Login</a>
    <% } %>
  </div>
</nav>

<main class="container my-5 flex-fill">

  <% if (user) { %>
  <div class="d-flex justify-content-end mb-3">
    <a href="/add" class="btn btn-success"> Add Item</a>
  </div>
  <% } %>

  <div class="card-box">

    <table class="table table-bordered table-light">
      <thead class="table-dark">
        <tr>
          <th>Item</th>
          <th>Image</th>
          <th>SKU</th>
          <th>Category</th>
          <th>Quantity</th>
          <th>Location</th>
          <th>Supplier</th>
          <th>Added By</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <% items.forEach((i) => { %>
        <tr>
          <td><%= i.itemName %></td>

          <td>
            <img src="<%= i.itemImage %>" width="130" height="80">
          </td>

          <td><%= i.sku %></td>
          <td><%= i.category %></td>

          <td>
            <% if (i.quantity < 10) { %>
              <span class="badge bg-danger">Low (<%= i.quantity %>)</span>
            <% } else { %>
              <span class="badge bg-success"><%= i.quantity %></span>
            <% } %>
          </td>

          <td><%= i.location %></td>
          <td><%= i.supplier %></td>
          <td><%= i.addedBy?.username || "N/A" %></td>

          <td>
            <% if (user && user.role === "admin") { %>
              <div class="d-flex justify-content-center gap-2">
                <a href="/edit/<%= i.id %>" class="btn btn-sm btn-warning">
                  Edit
                </a>

                <form action="/delete/<%= i.id %>?_method=delete" method="post"
                  onsubmit="return confirm('Delete this item?')">
                  <button class="btn btn-sm btn-danger">Delete</button>
                </form>
              </div>
            <% } else { %>
              <span class="text-muted">—</span>
            <% } %>
          </td>

        </tr>
        <% }) %>
      </tbody>
    </table>

  </div>
</main>
  <footer class="bg-dark text-light text-center py-3 mt-auto">
  <div class="container">
    <p class="mb-1 fw-semibold">
      Warehouse Inventory Management System
    </p>
    <small class="text-secondary">
      © 2026 | Developed by <a
            href="https://www.linkedin.com/in/sumit-sharma-7a435324b/"
            class="text-primary text-decoration-none"
          >Sumit Sharma</a>
    </small>
  </div>
</footer>


</body>
</html>
